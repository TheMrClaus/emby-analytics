# ======================
# MULTI-SERVER CONFIG (New!)
# ======================

# Multi-server configuration (JSON format)
# Leave empty to use legacy single-server mode below
MEDIA_SERVERS='[
  {"id":"main-emby","type":"emby","name":"Main Emby","base_url":"http://emby:8096","api_key":"your_emby_api_key","enabled":true},
  {"id":"living-plex","type":"plex","name":"Living Room Plex","base_url":"http://plex:32400","api_key":"your_plex_token","enabled":true},
  {"id":"bedroom-jellyfin","type":"jellyfin","name":"Bedroom Jellyfin","base_url":"http://jellyfin:8096","api_key":"your_jellyfin_api_key","enabled":true}
]'

# Default server to use (when not specified)
DEFAULT_MEDIA_SERVER=main-emby

# ======================
# LEGACY SINGLE-SERVER CONFIG (Backwards Compatible)
# ======================

# Emby server base URL (include port)
EMBY_BASE_URL=http://emby:8096

# Emby API key (Settings → Advanced → API Keys in Emby dashboard)
EMBY_API_KEY=changeme

# External Emby URL (for opening items in new tabs - use your public Emby URL)
EMBY_EXTERNAL_URL=http://your-emby-server:8096

# ======================
# STORAGE PATHS
# ======================

# Optional: SQLite database path (default inside container: /var/lib/emby-analytics/emby.db)
# Uncomment if you want a custom location
# SQLITE_PATH=/var/lib/emby-analytics/emby.db

# Optional: Path to serve static UI files (default inside container: /app/web)
# WEB_PATH=/app/web

# ======================
# POLLING & STREAMING
# ======================

# SSE keepalive interval in seconds
KEEPALIVE_SEC=15

# How often /now/stream polls Emby (seconds)
NOW_POLL_SEC=5

# ======================
# BACKGROUND SYNC
# ======================

# Background sync interval (seconds) - increased from 60 to 300 (5 minutes)
SYNC_INTERVAL=300

# Number of days of history to sync
HISTORY_DAYS=30

# User sync interval (seconds) - increased from 3600 (1hr) to 43200 (12hrs)
USERSYNC_INTERVAL=43200

# ======================
# IMAGE SETTINGS
# ======================

# Image quality (0-100)
IMG_QUALITY=90

# Primary image max width (pixels)
IMG_PRIMARY_MAX_WIDTH=300

# Backdrop image max width (pixels)
IMG_BACKDROP_MAX_WIDTH=1280

# ======================
# ADMIN SETTINGS
# ======================

# Refresh chunk size for admin operations
REFRESH_CHUNK_SIZE=200

# ======================
# LOGGING SETTINGS
# ======================

# Log level (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=INFO

# Log format (json, text, dev)
LOG_FORMAT=text

# Log output (stdout, stderr, or file path)
LOG_OUTPUT=stdout

# ======================
# SECURITY SETTINGS
# ======================

# Admin token for protecting admin endpoints
# If not set, the server will auto-generate and persist one under the data dir,
# and will enable ADMIN_AUTO_COOKIE automatically for zero-config UI access.
# To provide your own token, uncomment the following line:
# ADMIN_TOKEN=your_secure_admin_token_here

# Webhook secret for validating Emby webhook signatures
# If not set, it will automatically default to ADMIN_TOKEN (which is generated/persisted when unset).
# To provide your own secret, uncomment the following line:
# WEBHOOK_SECRET=your_secure_webhook_secret_here

# Note: The server automatically handles admin authentication cookies when ADMIN_TOKEN is unset.
